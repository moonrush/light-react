(this["webpackJsonplight-react"]=this["webpackJsonplight-react"]||[]).push([[0],{74:function(e,t,n){},75:function(e,t,n){},79:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(18),s=n.n(i),A=(n(74),n(21)),g=(n(75),n(14)),o=n.n(g),l=function(){var e=window.orientation;return 90===e||-90===e},h={width:1890,height:1890,bgColor:"#eee",minScale:.5,maxScale:2},r=[{id:"shanghai",name:"\u4e0a\u6d77",x:100,y:100,p:"AgqCJQgPgSgHgCIgBAAQAMgHAHgOQAGgNABgQQABgLgDgUQgCgWAAgJQAAgNAEgdQAFgcgBgPIgEgqQADAFAGADQAGACAFgCIAEgiQAEgBADADQADAEABAFIACAJQABAGACACQADACAGAAQAHAAADABQAGADADAOQAEANAGACQADABAIgBQAHgBADACQAJAFgFANIgEAJIgDAKIgBAGQAAADgCACIgIADQgHACAAAPIABAaQAAASAJAFIAJAFQAEADABAJQABAcgDAZIgBAFQgSgDgWAKQgSAJgOAQIgJAIIgEABQgHAAgKgMg",msg:"\u4e2d\u5171\u4e00\u5927"},{id:"beijing",name:"\u5317\u4eac",x:200,y:200,p:"AgqCJQgPgSgHgCIgBAAQAMgHAHgOQAGgNABgQQABgLgDgUQgCgWAAgJQAAgNAEgdQAFgcgBgPIgEgqQADAFAGADQAGACAFgCIAEgiQAEgBADADQADAEABAFIACAJQABAGACACQADACAGAAQAHAAADABQAGADADAOQAEANAGACQADABAIgBQAHgBADACQAJAFgFANIgEAJIgDAKIgBAGQAAADgCACIgIADQgHACAAAPIABAaQAAASAJAFIAJAFQAEADABAJQABAcgDAZIgBAFQgSgDgWAKQgSAJgOAQIgJAIIgEABQgHAAgKgMg",msg:"\u5317\u4eac\u5566\u5566\u5566\u5566"}],d=function(e){var t=this;t.stage=e.stage,t.canvas=e.stage.canvas,t.bgColor=e.bgColor||"#eee",t.width=e.width||500,t.height=e.height||550,t.maxScale=e.maxScale||2,t.minScale=e.minScale||.5;var n=new o.a.Container;return t.bg=new o.a.Shape((new o.a.Graphics).f(t.bgColor).dr(0,0,t.width,t.height)),n.scale=1,n.width=t.width,n.height=t.height,n.x=(t.canvas.width-t.width)/2*n.scale,n.y=(t.canvas.height-t.height)/2*n.scale,t.oldDis=t.oldCent=0,t.oldX=t.oldY=0,t._calFinger=function(e,t){return[Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2)),{x:(e.clientX+t.clientX)/2,y:(e.clientY+t.clientY)/2}]},t._setScale=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05;e=a*e+(1-a);var c=Math.max(Math.min(t.maxScale,e*n.scale),t.minScale);n.width=t.width*c,n.height=t.height*c,n.x=t.oldCent.x-(t.oldCent.x-n.x)*c/n.scale,n.y=t.oldCent.y-(t.oldCent.y-n.y)*c/n.scale,n.x=Math.max(Math.min(n.x,0),t.canvas.width-n.width),n.y=Math.max(Math.min(n.y,0),t.canvas.height-n.height),n.scale=n.scaleX=n.scaleY=c},t._calMove=function(){var e=t.stage.mouseX-t.oldX,n=t.stage.mouseY-t.oldY;return t.oldX=t.stage.mouseX,t.oldY=t.stage.mouseY,[e,n]},t._smapMousedown=function(e){var n=e.nativeEvent.touches;if(n&&n.length>=2){var a=t._calFinger(n[0],n[1]),c=Object(A.a)(a,2);return t.oldDis=c[0],t.oldCent=c[1],!0}var i=[t.stage.mouseX,t.stage.mouseY];t.oldX=i[0],t.oldY=i[1]},t._smapPressmove=function(e){var a=e.nativeEvent.touches;if(a&&a.length>=2){var c=t._calFinger(a[0],a[1]),i=Object(A.a)(c,1)[0];return t._setScale(i/t.oldDis),!0}var s=t._calMove(),g=Object(A.a)(s,2),o=g[0],l=g[1];n.x=Math.max(Math.min(n.x+o,0),t.canvas.width-n.width),n.y=Math.max(Math.min(n.y+l,0),t.canvas.height-n.height)},n.addEventListener("mousedown",t._smapMousedown),n.addEventListener("pressmove",t._smapPressmove),n.addChild(t.bg),n},m=function(e){var t=this;t.x=e.x||0,t.y=e.y||0,t.s=e.s||"#000",t.f=e.f||"#fff",t.p=e.p||"";var n=new o.a.Shape((new o.a.Graphics).s(t.s).f(t.f).p(t.p));return n.setTransform(t.x,t.y),n},u=n(88),j=n(69),b=n(3);var v=function(e){var t=function(){var e=Object(a.useState)({width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}),t=Object(A.a)(e,2),n=t[0],c=t[1],i=Object(a.useCallback)((function(){c({width:document.documentElement.clientWidth,height:document.documentElement.clientHeight})}),[]);return Object(a.useEffect)((function(){return window.addEventListener("resize",i),function(){window.removeEventListener("resize",i)}}),[i]),n}(),n=Object(a.useState)(),c=Object(A.a)(n,2),i=c[0],g=c[1],v=Object(a.useState)(),f=Object(A.a)(v,2),x=f[0],O=f[1],Q=Object(a.useState)(),p=Object(A.a)(Q,2),C=p[0],w=p[1],D=function(t,n,a){var c=Object(b.jsx)(u.a,{type:"primary",size:"small",onClick:function(){return function(t){e.history.push("/share?id=".concat(t))}(t)},children:"\u70b9\u4eae\u5b83"});j.a.open({message:n,description:a,btn:c,key:t,placement:"bottomRight"})},S=function(){x.update()},E=function(){var e=new d(h),t=new o.a.Bitmap(C.getResult("bg"));e.addChild(t),r.forEach((function(t){var n=new m({p:t.p,x:t.x,y:t.y});n.addEventListener("click",(function(){D(t.id,t.name,t.msg)})),e.addChild(n)})),window.ctr=e,x.addChild(e)};return Object(a.useEffect)((function(){g(s.a.findDOMNode(document.querySelector(".stage")))}),[]),Object(a.useEffect)((function(){i&&O(new o.a.Stage(i))}),[i]),Object(a.useEffect)((function(){x&&(o.a.Touch.enable(x,!1,!0),w(new o.a.LoadQueue(!1)))}),[x]),Object(a.useEffect)((function(){C&&(C.loadManifest([{src:"img/bg.jpg",id:"bg"}],!0),C.addEventListener("complete",E),h.stage=x,o.a.Ticker.timingMode=o.a.Ticker.RAF,o.a.Ticker.addEventListener("tick",S))}),[C]),Object(b.jsx)("div",{className:"App",children:Object(b.jsx)("canvas",{className:"stage",width:l()?t.height:t.width,height:l()?t.width:t.height,style:l()?{transform:"matrix(0,-1,1,0,0,".concat(-Math.abs((t.height-t.width)/2),")")}:{}})})},f=(n(79),n(6));var x=Object(f.e)((function(e){return Object(b.jsxs)("div",{className:"Home",children:[Object(b.jsx)("div",{className:"Home-background"}),Object(b.jsx)("div",{className:"Home-title",children:"\u767e\u5e74\u515a\u53f2\u3001\u70b9\u4eae\u5bb6\u4e61"}),Object(b.jsx)("div",{className:"Home-go",children:Object(b.jsx)("div",{className:"Home-go-btn",onClick:function(){e.history.push("/play")},children:"\u9a6c\u4e0a\u53bb\u70b9\u4eae"})}),Object(b.jsxs)("div",{className:"Home-link",children:[Object(b.jsx)("div",{className:"Home-link-btn",children:"\u767e\u5e74\u89c6\u9891"}),Object(b.jsx)("div",{className:"Home-link-btn",children:"\u6311\u6218\u7b54\u9898"}),Object(b.jsx)("div",{className:"Home-link-btn",children:"\u7ea2\u8272\u8db3\u8ff9"})]}),Object(b.jsxs)("div",{className:"Home-right",children:[Object(b.jsx)("p",{children:"\u65b0\u534e\u793e"}),Object(b.jsx)("p",{children:"\u4e2d\u56fd\u5730\u56fe\u51fa\u7248\u96c6\u56e2"})]})]})})),O=(n(84),n(68)),Q=n.n(O);var p=Object(f.e)((function(e){return Object(b.jsxs)("div",{className:"Share",children:[Object(b.jsx)("div",{className:"Share-background"}),Object(b.jsx)("div",{className:"Share-title",children:"\u4e0a\u6d77\u5e02"}),Object(b.jsxs)("div",{className:"Share-link",children:[Object(b.jsx)("div",{className:"Share-link-btn",children:Object(b.jsx)("a",{href:"#",children:"\u25b6 \u64ad\u653e"})}),Object(b.jsx)("div",{className:"Share-link-btn",onClick:function(){console.log(1),Q()(document.querySelector(".Share"),{scale:1,logging:!1,useCORS:!0}).then((function(e){var t=e.toDataURL(),n=new Image;n.src=t,n.style.width="100%",n.style.height="100%";var a=document.querySelector(".screen");console.log(n),a.append(n),a.style.display="block"}))},children:"\u751f\u6210\u622a\u56fe"}),Object(b.jsx)("div",{className:"Share-link-btn",children:Object(b.jsx)("a",{href:"#",children:"\u70b9\u51fb\u5206\u4eab"})})]}),Object(b.jsxs)("div",{className:"Share-right",children:[Object(b.jsx)("p",{children:"\u65b0\u534e\u793e"}),Object(b.jsx)("p",{children:"\u4e2d\u56fd\u5730\u56fe\u51fa\u7248\u96c6\u56e2"})]}),Object(b.jsx)("div",{className:"screen"})]})})),C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,89)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),i(e),s(e)}))},w=n(40);s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsxs)(w.a,{children:[Object(b.jsx)(f.a,{path:"/",exact:!0,component:x}),Object(b.jsx)(f.a,{path:"/play",component:v}),Object(b.jsx)(f.a,{path:"/share",component:p})]})}),document.getElementById("root")),C()}},[[85,1,2]]]);
//# sourceMappingURL=main.fadd8354.chunk.js.map