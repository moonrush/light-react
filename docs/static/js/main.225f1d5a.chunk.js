(this["webpackJsonplight-react"]=this["webpackJsonplight-react"]||[]).push([[0],{10:function(e,t,a){},11:function(e,t,a){},13:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),c=a(4),g=a.n(c),h=(a(10),a(11),a(0)),s=a.n(h),A=a(3),o={width:1890,height:1890,bgColor:"#eee",minScale:.5,maxScale:2},d=function(e){var t=this;t.stage=e.stage,t.canvas=e.stage.canvas,t.bgColor=e.bgColor||"#eee",t.width=e.width||500,t.height=e.height||550,t.maxScale=e.maxScale||2,t.minScale=e.minScale||.5;var a=new s.a.Container;return t.bg=new s.a.Shape((new s.a.Graphics).f(t.bgColor).dr(0,0,t.width,t.height)),a.scale=1,a.width=t.width,a.height=t.height,a.x=(t.canvas.width-t.width)/2*a.scale,a.y=(t.canvas.height-t.height)/2*a.scale,t.oldDis=t.oldCent=0,t.oldX=t.oldY=0,t._calFinger=function(e,t){return[Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2)),{x:(e.clientX+t.clientX)/2,y:(e.clientY+t.clientY)/2}]},t._setScale=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05;e=n*e+(1-n);var i=Math.max(Math.min(t.maxScale,e*a.scale),t.minScale);a.width=t.width*i,a.height=t.height*i,a.x=t.oldCent.x-(t.oldCent.x-a.x)*i/a.scale,a.y=t.oldCent.y-(t.oldCent.y-a.y)*i/a.scale,a.x=Math.max(Math.min(a.x,0),t.canvas.width-a.width),a.y=Math.max(Math.min(a.y,0),t.canvas.height-a.height),a.scale=a.scaleX=a.scaleY=i},t._calMove=function(){var e=t.stage.mouseX-t.oldX,a=t.stage.mouseY-t.oldY;return t.oldX=t.stage.mouseX,t.oldY=t.stage.mouseY,[e,a]},t._smapMousedown=function(e){var a=e.nativeEvent.touches;if(a.length>=2){var n=t._calFinger(a[0],a[1]),i=Object(A.a)(n,2);return t.oldDis=i[0],t.oldCent=i[1],!0}var c=[t.stage.mouseX,t.stage.mouseY];t.oldX=c[0],t.oldY=c[1]},t._smapPressmove=function(e){var n=e.nativeEvent.touches;if(n.length>=2){var i=t._calFinger(n[0],n[1]),c=Object(A.a)(i,2),g=c[0];c[1];return t._setScale(g/t.oldDis),!0}var h=t._calMove(),s=Object(A.a)(h,2),o=s[0],d=s[1];a.x=Math.max(Math.min(a.x+o,0),t.canvas.width-a.width),a.y=Math.max(Math.min(a.y+d,0),t.canvas.height-a.height)},a.addEventListener("mousedown",t._smapMousedown),a.addEventListener("pressmove",t._smapPressmove),a.addChild(t.bg),a},l=function(e){var t=this;t.x=e.x||0,t.y=e.y||0,t.s=e.s||"#000",t.f=e.f||"#fff",t.p=e.p||"";var a=new s.a.Shape((new s.a.Graphics).s(t.s).f(t.f).p(t.p));return a.setTransform(t.x,t.y),a},r=a(2);var u=function(){var e,t,a,i=function(){var e=Object(n.useState)({width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}),t=Object(A.a)(e,2),a=t[0],i=t[1],c=Object(n.useCallback)((function(){i({width:document.documentElement.clientWidth,height:document.documentElement.clientHeight})}),[]);return Object(n.useEffect)((function(){return window.addEventListener("resize",c),function(){window.removeEventListener("resize",c)}}),[c]),a}(),c=function(){t.update()},h=function(){var e=new d(o),n=new s.a.Bitmap(a.getResult("bg"));e.addChild(n);var i=new l({p:"AgqCJQgPgSgHgCIgBAAQAMgHAHgOQAGgNABgQQABgLgDgUQgCgWAAgJQAAgNAEgdQAFgcgBgPIgEgqQADAFAGADQAGACAFgCIAEgiQAEgBADADQADAEABAFIACAJQABAGACACQADACAGAAQAHAAADABQAGADADAOQAEANAGACQADABAIgBQAHgBADACQAJAFgFANIgEAJIgDAKIgBAGQAAADgCACIgIADQgHACAAAPIABAaQAAASAJAFIAJAFQAEADABAJQABAcgDAZIgBAFQgSgDgWAKQgSAJgOAQIgJAIIgEABQgHAAgKgMg",x:100,y:100});e.addChild(i),window.ctr=e,t.addChild(e)};return Object(n.useEffect)((function(){e=g.a.findDOMNode(document.querySelector(".stage")),t=new s.a.Stage(e),s.a.Touch.enable(t,!1,!0),(a=new s.a.LoadQueue(!1)).loadManifest([{src:"img/bg.jpg",id:"bg"}],!0),a.addEventListener("complete",h),o.stage=t,s.a.Ticker.timingMode=s.a.Ticker.RAF,s.a.Ticker.addEventListener("tick",c)}),[]),Object(r.jsx)("div",{className:"App",children:Object(r.jsx)("canvas",{className:"stage",width:Math.min(i.width,i.height),height:Math.max(i.height,i.width),style:i.width>i.height?{transform:"matrix(0,-1,1,0,0,".concat(-Math.abs((i.height-i.width)/2),")")}:{}})})},m=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,14)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,c=t.getLCP,g=t.getTTFB;a(e),n(e),i(e),c(e),g(e)}))};g.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(u,{})}),document.getElementById("root")),m()}},[[13,1,2]]]);
//# sourceMappingURL=main.225f1d5a.chunk.js.map